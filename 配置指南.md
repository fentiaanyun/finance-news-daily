# GitHub Secrets 配置详细指南

## 📧 QQ邮箱配置步骤

### 第一步：获取QQ邮箱授权码

**重要：授权码 ≠ 邮箱密码！**

1. **登录QQ邮箱网页版**
   - 访问：https://mail.qq.com
   - 使用你的QQ号和密码登录

2. **进入设置页面**
   - 点击右上角的"设置"
   - 选择"账户"标签页

3. **开启SMTP服务**
   - 向下滚动找到"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
   - 找到"POP3/SMTP服务"或"IMAP/SMTP服务"
   - 点击"开启"按钮
   - 可能需要手机验证（发送短信到指定号码）

4. **生成授权码**
   - 开启服务后，会显示"生成授权码"按钮
   - 点击"生成授权码"
   - 按照提示发送短信验证
   - **复制生成的16位授权码**（格式类似：`abcdefghijklmnop`）
   - ⚠️ **授权码只显示一次，请立即保存！**

### 第二步：在GitHub添加Secrets

1. **进入仓库设置**
   - 访问：https://github.com/fentiaanyun/finance-news-daily
   - 点击顶部的 `Settings` 标签

2. **打开Secrets配置**
   - 左侧菜单找到 `Secrets and variables`
   - 点击 `Actions`

3. **添加每个Secret**

   点击 `New repository secret`，依次添加：

   #### ✅ EMAIL_SENDER
   - **Name（名称）**: `EMAIL_SENDER`
   - **Secret（值）**: `23950413@qq.com`
   - 点击 `Add secret`

   #### ✅ EMAIL_PASSWORD
   - **Name（名称）**: `EMAIL_PASSWORD`
   - **Secret（值）**: `你刚才复制的16位授权码`（例如：`abcdefghijklmnop`）
   - ⚠️ **注意：这里填授权码，不是QQ密码！**
   - 点击 `Add secret`

   #### ✅ EMAIL_RECIPIENT
   - **Name（名称）**: `EMAIL_RECIPIENT`
   - **Secret（值）**: `23950413@qq.com`（可以填同一个邮箱，发给自己）
   - 点击 `Add secret`

   #### ✅ SMTP_SERVER
   - **Name（名称）**: `SMTP_SERVER`
   - **Secret（值）**: `smtp.qq.com`
   - 点击 `Add secret`

   #### ✅ SMTP_PORT
   - **Name（名称）**: `SMTP_PORT`
   - **Secret（值）**: `587`
   - 点击 `Add secret`

   #### ✅ SERVERCHAN_SEND_KEY（微信推送）
   - **Name（名称）**: `SERVERCHAN_SEND_KEY`
   - **Secret（值）**: 你的Server酱SendKey
   - 获取方式：访问 https://sctapi.ftqq.com/ 微信扫码登录获取
   - 点击 `Add secret`

   #### ⚙️ NEWS_API_KEY（可选，用于获取国际新闻）
   - **Name（名称）**: `NEWS_API_KEY`
   - **Secret（值）**: 你的NewsAPI密钥
   - 获取方式：访问 https://newsapi.org/ 注册获取
   - 点击 `Add secret`

## 📋 配置清单

完成配置后，你应该有以下几个Secrets：

- ✅ `EMAIL_SENDER` = `23950413@qq.com`
- ✅ `EMAIL_PASSWORD` = `你的16位授权码`
- ✅ `EMAIL_RECIPIENT` = `23950413@qq.com`
- ✅ `SMTP_SERVER` = `smtp.qq.com`
- ✅ `SMTP_PORT` = `587`
- ✅ `SERVERCHAN_SEND_KEY` = `你的Server酱密钥`
- ⚙️ `NEWS_API_KEY` = `你的NewsAPI密钥`（可选）

## 🔍 验证配置

配置完成后，测试工作流：

1. 进入仓库的 `Actions` 标签页
2. 找到 "每日财经新闻推送" 工作流
3. 点击 `Run workflow` → `Run workflow`
4. 等待执行完成（约1-2分钟）
5. 检查你的邮箱和微信是否收到推送

## ❓ 常见问题

### Q1: 授权码在哪里找？
**A**: 在QQ邮箱网页版 → 设置 → 账户 → POP3/IMAP/SMTP服务 → 生成授权码

### Q2: 授权码和密码有什么区别？
**A**: 
- **QQ密码**：用于登录QQ和邮箱的密码
- **授权码**：专门用于第三方应用（如GitHub Actions）访问邮箱的16位代码
- **必须使用授权码，不能使用QQ密码！**

### Q3: 授权码忘记了怎么办？
**A**: 重新生成一个新的授权码，然后在GitHub Secrets中更新 `EMAIL_PASSWORD` 的值

### Q4: 可以填QQ密码吗？
**A**: ❌ **不可以！** QQ邮箱不允许使用QQ密码通过SMTP发送邮件，必须使用授权码。

### Q5: SMTP_SERVER填什么？
**A**: 
- QQ邮箱：`smtp.qq.com`
- Gmail：`smtp.gmail.com`
- 163邮箱：`smtp.163.com`

### Q6: SMTP_PORT填什么？
**A**: 大多数邮箱使用 `587`（TLS加密端口）

## 📸 配置截图位置参考

1. **GitHub Secrets位置**：
   ```
   仓库 → Settings → Secrets and variables → Actions → New repository secret
   ```

2. **QQ邮箱授权码位置**：
   ```
   QQ邮箱网页版 → 设置（右上角）→ 账户 → POP3/IMAP/SMTP服务 → 生成授权码
   ```

## ✅ 配置完成检查

配置完成后，在GitHub仓库页面应该能看到：
- ✅ 所有Secrets都已添加（在Settings → Secrets中可见）
- ✅ 可以手动运行工作流测试
- ✅ 工作流执行成功后，邮箱和微信收到推送

---

**提示**：如果遇到问题，请检查：
1. 授权码是否正确（16位字母数字组合）
2. SMTP服务器地址是否正确
3. 端口号是否为587
4. 邮箱是否已开启SMTP服务
